import"./preload-helper-WPMeT1xN.js";/* empty css            */import{g as f}from"./supabaseClient-BZSWgoCJ.js";document.addEventListener("DOMContentLoaded",async()=>{const g=document.getElementById("loading-state"),h=document.getElementById("error-state"),m=document.getElementById("error-message"),d=document.getElementById("retry-btn"),t=new URLSearchParams(window.location.search),o=new URLSearchParams(window.location.hash.substring(1)),w=t.get("code")||o.get("code"),n=t.get("error")||o.get("error"),l=t.get("error_description")||o.get("error_description")||n,s=t.get("next")||"/";if(n){r(`로그인 실패: ${l}`),console.error("Login error params:",n,l);return}if(!w){console.warn("No login code found. URL:",window.location.href),r("로그인 코드가 없습니다. 다시 로그인해주세요.");return}try{const e=await f();if(!e){r("인증 서비스가 설정되지 않았습니다.");return}const{data:a,error:c}=await e.auth.exchangeCodeForSession(window.location.href);if(c){console.error("OAuth exchange error:",c),r(`로그인 처리 중 오류가 발생했습니다: ${c.message}`);return}if(a!=null&&a.session){const i=new URL(window.location.href);i.searchParams.delete("code"),i.searchParams.delete("state"),history.replaceState(null,"",i.toString());const u=s.startsWith("http")?s:new URL(s,window.location.origin).pathname;setTimeout(()=>{window.location.href=u},500)}else r("세션을 가져오지 못했습니다. 다시 로그인해주세요.")}catch(e){console.error("Callback error:",e),r(`예기치 않은 오류가 발생했습니다: ${e.message}`)}function r(e){g.style.display="none",h.style.display="block",m.textContent=e}d&&d.addEventListener("click",()=>{window.location.href="/"})});
