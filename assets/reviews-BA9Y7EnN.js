import{g as c}from"./supabaseClient-BZSWgoCJ.js";import{getUser as o}from"./core-DFjEd1v7.js";import"./preload-helper-WPMeT1xN.js";async function g(a){const r=await c();if(!r)return{success:!1,error:"Supabase not configured"};const s=await o();if(!s)return{success:!1,error:"Not signed in"};try{const{data:e,error:t}=await r.from("nickname_registry").select("nickname_raw").eq("game_slug",a).eq("user_id",s.id).maybeSingle();if(!t&&e)return{success:!0,nickname:e.nickname_raw};const{data:n,error:i}=await r.from("leaderboard").select("nickname").eq("game_slug",a).eq("user_id",s.id).maybeSingle();return!i&&n?{success:!0,nickname:n.nickname}:{success:!1,error:"Nickname not found"}}catch(e){return console.error("Get nickname exception:",e),{success:!1,error:e.message||"Unknown error"}}}export{g as getUserNickname};
