const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ui-DNXjQp4A.js","./preload-helper-WPMeT1xN.js","./preload-helper-DFlHEO2w.css","./core-DFjEd1v7.js","./supabaseClient-BZSWgoCJ.js"])))=>i.map(i=>d[i]);
import{_ as y}from"./preload-helper-WPMeT1xN.js";/* empty css               *//* empty css            */import{r as I,a as L}from"./footer-C1ze9EoY.js";document.addEventListener("DOMContentLoaded",async()=>{const o=document.getElementById("header-mount"),n=document.getElementById("footer-mount");o&&(I(o),await v()),n&&L(n),console.log("[Hub] 초기화 완료")});async function v(){try{const{initAuthUI:o}=await y(async()=>{const{initAuthUI:t}=await import("./ui-DNXjQp4A.js");return{initAuthUI:t}},__vite__mapDeps([0,1,2]),import.meta.url),{getUser:n,onAuthStateChange:m}=await y(async()=>{const{getUser:t,onAuthStateChange:e}=await import("./core-DFjEd1v7.js");return{getUser:t,onAuthStateChange:e}},__vite__mapDeps([3,1,2,4]),import.meta.url),i=document.getElementById("headerLoginBtn"),g=document.getElementById("headerLogoutBtn"),r=document.getElementById("headerAccountMenu"),a=document.getElementById("headerAccountNicknameMobile");if(!i&&!g)return;i&&(i.style.display="block"),r&&(r.style.display="none");async function k(t){var e,s,d,_,p,w,h,E,b;if(!a||!t){a&&(a.textContent="Guest");return}try{const{getUserProfile:u}=await y(async()=>{const{getUserProfile:f}=await import("./core-DFjEd1v7.js");return{getUserProfile:f}},__vite__mapDeps([3,1,2,4]),import.meta.url),l=await u("seoulsurvival");if(l.success&&((e=l.user)!=null&&e.nickname))a.textContent=l.user.nickname;else{const f=((s=t==null?void 0:t.user_metadata)==null?void 0:s.full_name)||((d=t==null?void 0:t.user_metadata)==null?void 0:d.name)||((_=t==null?void 0:t.user_metadata)==null?void 0:_.preferred_username)||((p=t==null?void 0:t.email)==null?void 0:p.split("@")[0])||"Guest";a.textContent=f}}catch(u){console.warn("[Hub] Failed to get nickname:",u);const l=((w=t==null?void 0:t.user_metadata)==null?void 0:w.full_name)||((h=t==null?void 0:t.user_metadata)==null?void 0:h.name)||((E=t==null?void 0:t.user_metadata)==null?void 0:E.preferred_username)||((b=t==null?void 0:t.email)==null?void 0:b.split("@")[0])||"Guest";a.textContent=l}}async function c(t){const e=!!t;i&&(i.style.display=e?"none":"block"),r&&(r.style.display=e?"block":"none"),await k(t)}const B=await n();await c(B);const A=await o({scope:"hub",providerButtons:[],defaultProvider:"google",loginBtn:i,logoutBtn:g,userLabel:null,statusLabel:null,toast:t=>console.log("[Hub]",t)});setTimeout(async()=>{const t=await n();await c(t)},100),m(async t=>{await c(t)}),window.addEventListener("nicknamechanged",async t=>{var d;const e=(d=t.detail)==null?void 0:d.nickname;e&&a&&(a.textContent=e,console.log("[Hub] Nickname updated from event:",e));const s=await n();await c(s)}),window.addEventListener("authstatechange",async()=>{const t=await n();await c(t)})}catch(o){console.warn("[Hub] Header auth init failed, using guest mode:",o);const n=document.getElementById("headerLoginBtn"),m=document.getElementById("headerAccountMenu");n&&(n.style.display="block"),m&&(m.style.display="none")}}
