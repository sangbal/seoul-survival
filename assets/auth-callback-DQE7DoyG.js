import"./preload-helper-WPMeT1xN.js";/* empty css            */import{g as h}from"./supabaseClient-BZSWgoCJ.js";document.addEventListener("DOMContentLoaded",async()=>{const i=document.getElementById("loading-state"),l=document.getElementById("error-state"),d=document.getElementById("error-message"),c=document.getElementById("retry-btn"),r=new URLSearchParams(window.location.search),o=r.get("next")||"/",m=r.get("code");if(r.get("state"),!m){t("로그인 코드가 없습니다. 다시 로그인해주세요.");return}try{const e=await h();if(!e){t("인증 서비스가 설정되지 않았습니다.");return}const{data:n,error:a}=await e.auth.exchangeCodeForSession(window.location.href);if(a){console.error("OAuth exchange error:",a),t(`로그인 처리 중 오류가 발생했습니다: ${a.message}`);return}if(n!=null&&n.session){const s=new URL(window.location.href);s.searchParams.delete("code"),s.searchParams.delete("state"),history.replaceState(null,"",s.toString());const g=o.startsWith("http")?o:new URL(o,window.location.origin).pathname;setTimeout(()=>{window.location.href=g},500)}else t("세션을 가져오지 못했습니다. 다시 로그인해주세요.")}catch(e){console.error("Callback error:",e),t(`예기치 않은 오류가 발생했습니다: ${e.message}`)}function t(e){i.style.display="none",l.style.display="block",d.textContent=e}c&&c.addEventListener("click",()=>{window.location.href="/"})});
