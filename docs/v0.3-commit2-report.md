# v0.3 Commit 2 완료 리포트: shared/auth 모듈 생성 + 공통 사용

## 작업 내용

### 1. signInGoogle() 함수 추가
- **위치**: `shared/auth/core.js`
- **기능**: Google 로그인 전용 함수 (공통 사용)
- **구현**:
  ```javascript
  export async function signInGoogle(nextUrl = null) {
    return signInWithOAuth('google', null);
  }
  ```
- **참고**: Commit 3에서 `/auth/callback`으로 redirectTo 통일 예정

### 2. getUserProfile() 함수 추가
- **위치**: `shared/auth/core.js`
- **기능**: 사용자 프로필 조회 (닉네임/유저ID 등, 아바타 제외)
- **반환값**:
  ```javascript
  {
    success: boolean,
    user?: {
      id: string,
      email?: string,
      displayName?: string,
      nickname?: string
    },
    error?: string
  }
  ```
- **구현**: `shared/reviews.js`의 `getUserNickname` 함수 재사용

### 3. signInWithOAuth() 함수 개선
- **위치**: `shared/auth/core.js`
- **변경**: `redirectTo` 파라미터 추가 (선택사항)
- **하위 호환성**: redirectTo가 없으면 기존 동작 유지

### 4. 중복 호출 제거
- **위치**: `seoulsurvival/src/main.js`
- **변경**: 
  - `signInWithOAuth` import → `signInGoogle` import로 변경
  - 직접 호출 2곳을 `signInGoogle()`로 변경
- **결과**: 공통 모듈 사용으로 통일

### 5. UI 모듈 업데이트
- **위치**: `shared/auth/ui.js`
- **변경**: `doLogin` 함수에서 Google 로그인 시 `signInGoogle` 사용
- **결과**: 모든 Google 로그인이 공통 함수 사용

## 검증 결과

### 빌드
- ✅ 빌드 성공 (636ms)
- ✅ 모든 모듈 정상 로드
- ✅ import 경로 정상

### 코드 중복 제거
- ✅ `seoulsurvival/src/main.js`의 직접 호출 제거
- ✅ 모든 Google 로그인이 `signInGoogle()` 사용
- ✅ 공통 모듈 사용 확인

## 다음 단계

Commit 3: /auth/callback 구현 + Redirect URL 정리
- `/auth/callback` 페이지 생성
- `signInGoogle`의 redirectTo를 `/auth/callback`으로 통일
- Supabase Redirect URLs 화이트리스트 문서화







