# v0.3 스모크 테스트 체크리스트

## 개요
ClickSurvivor Hub v0.3의 주요 기능을 검증하는 스모크 테스트 체크리스트입니다.

## 테스트 환경
- **로컬 개발**: `npm run dev` (http://localhost:5173)
- **프로덕션 빌드**: `npm run build` → `npm run preview` (http://localhost:4173)
- **브라우저**: Chrome/Edge (최신 버전)
- **모바일 뷰포트**: 375x667 (iPhone SE)

## 자동화 테스트 (Playwright)

### 실행 방법
```bash
npm test              # 헤드리스 모드
npm run test:ui        # UI 모드
```

### 테스트 항목

#### 1. Hub 로드 + Play Now 가시성 (모바일 viewport)
- **파일**: `tests/smoke.spec.js:4-25`
- **검증**:
  - ✅ 헤더/푸터 표시
  - ✅ Play Now 버튼 표시
  - ✅ 모바일 viewport에서 fold 안에 표시 (스크롤 없이 보임)

#### 2. Play Now 링크 href 확인 + navigation
- **파일**: `tests/smoke.spec.js:27-44`
- **검증**:
  - ✅ Play Now 버튼의 href가 `seoulsurvival` 포함
  - ✅ 클릭 시 `/seoulsurvival/`로 이동
  - ✅ 404 에러 없음

#### 3. Account 삭제 확인 UI enable 로직
- **파일**: `tests/smoke.spec.js:46-75`
- **검증**:
  - ✅ 초기 상태: Delete 버튼 disabled
  - ✅ 체크박스만 체크: 여전히 disabled
  - ✅ "DELETE" 입력: enabled
  - ✅ 다른 값 입력: disabled
  - ✅ 체크박스 해제: disabled

#### 4. 푸터 SNS 링크 속성 확인
- **파일**: `tests/smoke.spec.js:77-119`
- **검증**:
  - ✅ X/Twitter 링크: `target="_blank"`, `rel="noopener"`, `aria-label` 존재
  - ✅ Instagram 링크: `target="_blank"`, `rel="noopener"` 존재
  - ✅ Threads 링크: `target="_blank"`, `rel="noopener"` 존재

## 반자동 테스트 체크리스트 (OAuth E2E)

### OAuth 로그인 플로우

#### 1. 로그인 버튼 클릭
- [ ] 허브 홈페이지에서 "Login" 버튼 클릭
- [ ] Google OAuth 페이지로 리다이렉트
- [ ] Google 계정 선택/인증
- [ ] `/auth/callback?code=...`로 리다이렉트
- [ ] 콜백 페이지에서 "로그인 처리 중..." 표시
- [ ] 원래 페이지(허브 홈)로 리다이렉트
- [ ] 헤더에 닉네임 표시 (또는 "Login" 버튼 사라짐)

#### 2. 세션 상태 동기화
- [ ] 로그인 후 `/account/` 페이지 이동
- [ ] 헤더에 닉네임 표시 확인
- [ ] `/seoulsurvival/` 페이지 이동
- [ ] 게임 페이지에서도 로그인 상태 유지 확인

### /account 페이지 기능

#### 1. 현재 닉네임 표시
- [ ] 로그인 상태에서 `/account/` 접속
- [ ] "현재 닉네임: [닉네임]" 표시 확인
- [ ] 닉네임이 없으면 표시 영역 숨김 확인

#### 2. 닉네임 변경
- [ ] 유효한 닉네임 입력 (1~6자, 한글/영문/숫자/밑줄)
- [ ] "Save" 버튼 클릭
- [ ] 성공 토스트 메시지 표시
- [ ] 현재 닉네임 업데이트 확인
- [ ] 헤더 닉네임 업데이트 확인

#### 3. 닉네임 변경 쿨타임
- [ ] 닉네임 변경 성공 후
- [ ] "⏱️ 닉네임 변경 쿨타임: [N]초 남음" 표시 확인
- [ ] 쿨타임 중 "Save" 버튼 disabled 확인
- [ ] 쿨타임 종료 후 버튼 enabled 확인

#### 4. 닉네임 유효성 검사
- [ ] 빈 값: Save 버튼 disabled
- [ ] 7자 이상: 에러 메시지 표시
- [ ] 공백 포함: 에러 메시지 표시
- [ ] 특수문자 포함: 에러 메시지 표시
- [ ] 이미 사용 중인 닉네임: "이미 사용 중인 닉네임입니다" 메시지

#### 5. 로그아웃
- [ ] "Logout" 버튼 클릭
- [ ] 확인 다이얼로그 표시
- [ ] 확인 후 로그아웃
- [ ] 토스트 메시지 표시
- [ ] 페이지 새로고침 후 로그인 상태 해제 확인

#### 6. 계정 삭제
- [ ] "복구 불가 동의" 체크박스 체크
- [ ] "DELETE" 입력
- [ ] "Delete account" 버튼 enabled 확인
- [ ] 버튼 클릭 → 1단계 확인 다이얼로그
- [ ] 확인 → 2단계 확인 다이얼로그
- [ ] 확인 → 계정 삭제 진행
- [ ] 성공 시 홈페이지로 리다이렉트
- [ ] 로그인 상태 해제 확인

### /auth/callback 페이지

#### 1. 정상 플로우
- [ ] OAuth 인증 후 콜백 페이지 접속
- [ ] "로그인 처리 중..." 스피너 표시
- [ ] 세션 교환 성공
- [ ] 원래 목적지로 리다이렉트

#### 2. 에러 처리
- [ ] `code` 파라미터 없음: 에러 메시지 표시
- [ ] Supabase 미설정: "인증 서비스가 설정되지 않았습니다" 메시지
- [ ] 세션 교환 실패: 에러 메시지 + "다시 시도" 버튼

### Edge Function (계정 삭제)

#### 1. 배포 확인
- [ ] Supabase CLI로 Edge Function 배포 완료
- [ ] 환경 변수 설정 확인:
  - `SUPABASE_URL`
  - `SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY`

#### 2. 삭제 순서 확인
- [ ] `game_saves` 테이블에서 삭제 확인
- [ ] `leaderboard` 테이블에서 삭제 확인
- [ ] `nickname_registry` 테이블에서 삭제 확인
- [ ] `reviews` 테이블에서 삭제 확인 (있는 경우)
- [ ] `auth.users`에서 삭제 확인

## 브라우저 콘솔 검증

### 에러 확인
- [ ] 콘솔에 에러 없음
- [ ] 경고 메시지 확인 (Console Ninja는 무시 가능)

### 네트워크 요청 확인
- [ ] OAuth 리다이렉트 정상
- [ ] `/auth/callback` 요청 정상
- [ ] Edge Function 호출 정상 (계정 삭제 시)

## 성능 검증

### 로딩 시간
- [ ] 허브 홈페이지: 1초 이내
- [ ] `/account/` 페이지: 1초 이내
- [ ] `/auth/callback` 페이지: 1초 이내

### 번들 크기
- [ ] 빌드 후 주요 번들 크기 확인
- [ ] 불필요한 중복 코드 없음

## 접근성 검증

### 키보드 네비게이션
- [ ] Tab 키로 모든 인터랙티브 요소 접근 가능
- [ ] Enter/Space로 버튼 활성화 가능

### 스크린 리더
- [ ] `aria-label` 속성 확인
- [ ] 버튼/링크에 적절한 텍스트 또는 라벨 존재

## 모바일 반응형

### 뷰포트 테스트
- [ ] 375x667 (iPhone SE): 모든 요소 표시
- [ ] 414x896 (iPhone 11 Pro Max): 레이아웃 정상
- [ ] 768x1024 (iPad): 레이아웃 정상

### 터치 영역
- [ ] 버튼 최소 44x44px (iOS 가이드라인)
- [ ] 링크 클릭 영역 충분

## 보안 검증

### OAuth 보안
- [ ] `redirectTo` URL이 Supabase 화이트리스트에 등록됨
- [ ] Google OAuth 설정에 도메인 등록됨

### 계정 삭제 보안
- [ ] Service Role Key가 클라이언트에 노출되지 않음
- [ ] Edge Function에서만 `admin.deleteUser()` 호출
- [ ] JWT 토큰 검증 정상

## 테스트 결과 기록

### 테스트 일자
- 날짜: ___________
- 테스터: ___________
- 환경: ___________

### 통과/실패
- [ ] 자동화 테스트: 통과 / 실패
- [ ] 수동 테스트: 통과 / 실패
- [ ] 브라우저 콘솔: 통과 / 실패
- [ ] 성능: 통과 / 실패
- [ ] 접근성: 통과 / 실패
- [ ] 모바일 반응형: 통과 / 실패
- [ ] 보안: 통과 / 실패

### 발견된 이슈
1. ___________
2. ___________
3. ___________

