# Supabase Redirect URLs 설정 가이드

## 개요
ClickSurvivor Hub는 OAuth 로그인을 위해 공통 콜백 엔드포인트 `/auth/callback`을 사용합니다.

## Supabase 대시보드 설정

### Redirect URLs (화이트리스트)
Supabase 대시보드 → Authentication → URL Configuration → Redirect URLs에 다음을 추가:

#### 프로덕션
```
https://clicksurvivor.com/auth/callback
```

#### 개발 환경 (로컬)
```
http://localhost:5173/auth/callback
http://localhost:4173/auth/callback
```

### Site URL
- **프로덕션**: `https://clicksurvivor.com`
- **개발**: `http://localhost:5173` (또는 사용 중인 포트)

## Google OAuth 설정

### Authorized JavaScript origins
Google Cloud Console → APIs & Services → Credentials → OAuth 2.0 Client ID → Authorized JavaScript origins에 추가:

#### 프로덕션
```
https://clicksurvivor.com
```

#### 개발 환경
```
http://localhost:5173
http://localhost:4173
```

### Authorized redirect URIs
Google Cloud Console → APIs & Services → Credentials → OAuth 2.0 Client ID → Authorized redirect URIs에 추가:

#### 프로덕션
```
https://<YOUR_SUPABASE_PROJECT_ID>.supabase.co/auth/v1/callback
```

#### 개발 환경
```
http://<YOUR_SUPABASE_PROJECT_ID>.supabase.co/auth/v1/callback
```

**참고**: Supabase가 OAuth 리다이렉트를 처리하므로, Google OAuth 설정에는 Supabase 콜백 URL을 추가해야 합니다.

## 동작 흐름

1. 사용자가 "Login" 버튼 클릭
2. `signInGoogle()` 호출 → `redirectTo: https://clicksurvivor.com/auth/callback`
3. Google OAuth 페이지로 리다이렉트
4. 사용자 인증 후 Supabase 콜백으로 리다이렉트
5. Supabase가 `/auth/callback?code=...&state=...`로 리다이렉트
6. `/auth/callback` 페이지에서 세션 교환
7. 원래 목적지(`next` 파라미터)로 리다이렉트

## 주의사항

- **절대 규칙**: Supabase Redirect URLs에 정확히 일치하는 URL만 추가
- **프로토콜**: `http://`와 `https://`는 별도로 추가 필요
- **포트**: 개발 환경에서는 포트 번호 포함
- **경로**: `/auth/callback` 경로는 정확히 일치해야 함







